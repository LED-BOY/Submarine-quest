parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pukg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CST=void 0;var e={SCENES:{LOAD:"LOAD",MENU:"MENU",PLAY:"PLAY",END:"END"},IMAGE:{LOGO:"logo.png",OPTIONS:"options_button.png",PLAY:"play_button.png",TITLE:"title_bg.png",GAME_BG:"game_bg.png",END_BG:"end_bg.png",FIRE_BUTTON:"fire_button.png"},AUDIO:{TITLE:"menu_theme.mp3",GAME_MUSIC:"main_theme.mp3",DIVER_SOUND:"diver_rescued.ogg",ENEMY_SOUND:"enemy_sub_destroyed.ogg",SHARK_SOUND:"shark_killed.ogg",PLAYER_FIRE_SOUND:"fire_sound.ogg",END_SOUND:"gameover.ogg",NEW_SOUND:"new_game.ogg",OXIGEN:"oxigen_refill.ogg",OXIGEN_LOW:"oxigen_low.ogg",RESCUE_COMPLETED:"rescue_completed.ogg",RESCUE_SEQUENCE:"rescue_sequence.ogg"},SPRITE:{SUBMARINE:"submarine.png",SHARK:"shark.png",DIVER:"diver.png",BOMB:"bomb.png"}};exports.CST=e;
},{}],"Ycqt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadScene=void 0;var t=require("../CST");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var r=a(t,"string");return"symbol"===e(r)?r:String(r)}function a(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,r||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=p();return function(){var r,o=h(t);if(e){var n=h(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return f(this,r)}}function f(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){u(i,Phaser.Scene);var o=s(i);function i(){return r(this,i),o.call(this,{key:t.CST.SCENES.LOAD})}return n(i,[{key:"init",value:function(){}},{key:"loadImages",value:function(){for(var e in this.load.setPath("./assets/image"),t.CST.IMAGE)this.load.image(t.CST.IMAGE[e],t.CST.IMAGE[e])}},{key:"loadAudio",value:function(){for(var e in this.load.setPath("./assets/audio"),t.CST.AUDIO)this.load.audio(t.CST.AUDIO[e],t.CST.AUDIO[e])}},{key:"loadSprites",value:function(){this.load.setPath("./assets/sprite"),this.load.spritesheet(t.CST.SPRITE.SUBMARINE,t.CST.SPRITE.SUBMARINE,{frameWidth:96,frameHeight:33}),this.load.spritesheet(t.CST.SPRITE.SHARK,t.CST.SPRITE.SHARK,{frameWidth:455,frameHeight:232}),this.load.spritesheet(t.CST.SPRITE.DIVER,t.CST.SPRITE.DIVER,{frameWidth:320,frameHeight:219}),this.load.spritesheet(t.CST.SPRITE.BOMB,t.CST.SPRITE.BOMB,{frameWidth:288,frameHeight:210})}},{key:"preload",value:function(){var t=this;this.loadSprites(),this.loadAudio(),this.loadImages();var e=this.add.graphics({fillStyle:{color:16777215}});this.load.on("progress",function(r){e.fillRect(0,t.game.renderer.height/2,t.renderer.width*r,50),console.log(r)}),this.load.on("complete",function(){}),this.load.on("load",function(t){console.log(t.src)})}},{key:"create",value:function(){this.scene.stop(t.CST.SCENES.LOAD),this.scene.start(t.CST.SCENES.MENU)}}]),i}();exports.LoadScene=d;
},{"../CST":"pukg"}],"qGid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=p();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(t){c(i,Phaser.Scene);var n=a(i);function i(){return r(this,i),n.call(this,{key:e.CST.SCENES.MENU})}return o(i,[{key:"init",value:function(){}},{key:"preload",value:function(){this.sound.stopAll()}},{key:"create",value:function(){var t=this;console.log("title loading"),this.add.image(this.game.renderer.width/2,.2*this.game.renderer.height,e.CST.IMAGE.LOGO).setDepth(1),this.add.image(0,0,e.CST.IMAGE.TITLE).setOrigin(0).setDepth(0);var r=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,e.CST.IMAGE.PLAY).setDepth(1),n=this.add.sprite(r.x-r.width,r.y,e.CST.SPRITE.SUBMARINE).setScale(1);this.sound.pauseOnBlur=!1,this.sound.play(e.CST.AUDIO.TITLE,{loop:!0,volume:.8}),this.controls=this.input.keyboard.addKeys("up, down, left, right, space, enter"),this.anims.create({key:"animSubmarine",frameRate:3,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{frames:[0,1,2]})}),n.play("animSubmarine"),r.setInteractive(),r.on("pointerover",function(){console.log("hovering"),n.setVisible(!0),n.play("animSubmarine"),n.x=r.x-r.width,n.y=r.y}),r.on("pointerout",function(){console.log("out of here"),n.setVisible(!1)}),r.on("pointerup",function(){console.log("Play"),t.scene.stop(e.CST.SCENES.MENU),t.scene.run(e.CST.SCENES.PLAY)})}},{key:"update",value:function(t,r){1==this.controls.enter.isDown&&(this.scene.stop(e.CST.SCENES.MENU),this.scene.run(e.CST.SCENES.PLAY))}}]),i}();exports.MenuScene=h;
},{"../CST":"pukg"}],"M75y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n(s.key),s)}}function a(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var i=r(e,"string");return"symbol"===t(i)?i:String(i)}function r(e,i){if("object"!==t(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,i||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=c();return function(){var i,s=m(e);if(t){var a=m(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return y(this,i)}}function y(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,f,p,b,v,S,g,E=0,T=0,R=0,k=0,C=0,L=[120,220,320,420,520],I=0,B=new Phaser.Events.EventEmitter,P=new Phaser.Events.EventEmitter,A=new Phaser.Events.EventEmitter,D=new Phaser.Events.EventEmitter,w=3,O=0,N=0,M=1e3,x=1,V=!0,U=!1,X=!0,F=!1,_=function(t){o(n,Phaser.Scene);var s=d(n);function n(){return i(this,n),s.call(this,{key:e.CST.SCENES.PLAY})}return a(n,[{key:"initVariables",value:function(){u=1,f=!0,p=140,b=100,v=0,S=!1,g=200,L=[120,220,320,420,520],X=!0}},{key:"init",value:function(e){this.initVariables(),1==e.sceneRestart&&((x=e.gameLevel)>30&&(x=30),O=e.resetScore)}},{key:"preload",value:function(){this.sound.stopAll(),V&&this.load.plugin("rexvirtualjoystickplugin","assets/plugins/virtualJoystick.js",!0)}},{key:"create",value:function(){var t=this;this.background=this.physics.add.image(0,0,e.CST.IMAGE.GAME_BG).setOrigin(0).setDepth(0),this.add.graphics({fillStyle:{color:2604996}}).fillRect(0,86,800,12).setDepth(2),1==this.sys.game.device.input.touch?(this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:120,y:470,radius:140,base:this.add.circle(0,0,50,8947848),thumb:this.add.circle(0,0,25,13421772),dir:"4dir",forceMin:16,fixed:!0,enable:!0}),this.controls=this.joyStick.createCursorKeys(),this.fireButton=this.add.image(700,520,e.CST.IMAGE.FIRE_BUTTON).setScale(.4).setDepth(0),this.input.addPointer(1),this.fireButton.setInteractive(),this.fireButton.on("pointerover",function(){U=!0})):(this.controls=this.input.keyboard.addKeys("up, down, left, right, esc"),U=this.input.keyboard.addKey("space"));var i=this.add.text(780,0,"X",{fontSize:"20px",fill:"#0000FF",fontFamily:"Arial"});i.setInteractive(),i.on("pointerup",function(){t.scene.stop(e.CST.SCENES.PLAY),t.scene.run(e.CST.SCENES.MENU)}),V&&(V=!1,this.anims.create({key:"left",frameRate:10,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{start:0,end:2})}),this.anims.create({key:"right",frameRate:10,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{start:3,end:5})}),this.anims.create({key:"sharkLeftToRight",frameRate:5,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SHARK,{frames:[0,1,2,1,0]})}),this.anims.create({key:"sharkRightToLeft",frameRate:5,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SHARK,{frames:[3,4,5,4,3]})}),this.anims.create({key:"diverLeftToRight",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.DIVER,{frames:[0,1,2,1,0,2]})}),this.anims.create({key:"diverRightToLeft",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.DIVER,{frames:[3,4,5,4,3,5]})}),this.anims.create({key:"bombRight",frameRate:0,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.BOMB,{frames:[0]})}),this.anims.create({key:"bombLeft",frameRate:0,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.BOMB,{frames:[1]})}),this.anims.create({key:"enemiLeftToRight",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{frames:[6,7,8]})}),this.anims.create({key:"enemiRightToLeft",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{frames:[9,10,11]})}),P.on("sound",this.soundFx,this),B.on("rescued",this.rescueEvent,this),A.on("updateArray",this.arrayFunction,this),D.on("scoreAndLives",this.scoreAndLives,this)),(v=this.add.graphics({fillStyle:{color:255}})).fillRect(380,540,b,18).setDepth(1),N=this.add.text(16,16,"Score:",{fontSize:"24px",fill:"#000"}),D.emit("scoreAndLives",0),this.add.text(280,540,"OXIGEN:",{fontSize:"24px",fill:"#000"}),this.sound.play(e.CST.AUDIO.GAME_MUSIC,{loop:!0,volume:.2}),this.submarine=this.physics.add.sprite(400,75,e.CST.SPRITE.SUBMARINE,0).setScale(1),this.submarine.setSize(80,20).setOffset(6,10),this.submarine.body.customBoundsRectangle=new Phaser.Geom.Rectangle(0,75,800,525),this.submarine.body.setCollideWorldBounds(!0),this.manyEnemies=this.physics.add.group(),this.manyEnemies.defaults.setImmovable=!0,this.manySharks=this.physics.add.group(),this.manySharks.defaults.setImmovable=!0,this.manyDivers=this.physics.add.group(),this.diversSaved=this.add.group();for(var s=0;s<T;s++)g+=50,this.diversSaved.add(this.add.sprite(g,580,e.CST.SPRITE.DIVER,0).setScale(.15));this.manyBombs=this.physics.add.group(),this.manyBombs.defaults.setImmovable=!0,this.timedEvents(),this.physics.add.collider(this.background,this.manyBombs,function(e,t){1==t.body.checkWorldBounds()&&t.destroy()}),this.physics.add.collider(this.submarine,this.manySharks,function(e,t){e.active=!1}),this.physics.add.collider(this.submarine,this.manyEnemies,function(e,t){e.active=!1}),this.physics.add.collider(this.submarine,this.manyBombs,function(e,t){16711680==t.tintTopLeft&&(e.active=!1)}),this.physics.add.collider(this.manyDivers,this.manySharks,function(e,t){var i=t.body.velocity.x;255==e.tintTopLeft&&(e.body.setVelocityX(i),i>0?e.play("diverLeftToRight"):e.play("diverRightToLeft"))}),this.physics.add.collider(this.manyDivers,this.manyEnemies,function(e,t){t.body.velocity.x;255==e.tintTopLeft&&(e.destroy(),P.emit("sound",2),O>=20&&D.emit("scoreAndLives",-20))}),this.physics.world.addCollider(this.manyDivers,this.manyDivers,function(e,t){e.body.velocity.x>0?(e.body.setVelocityX(100),e.play("diverLeftToRight")):(e.body.setVelocityX(-100),e.play("diverRightToLeft")),t.body.velocity.x>0?(t.body.setVelocityX(100),t.play("diverLeftToRight")):(t.body.setVelocityX(-100),t.play("diverRightToLeft"))}),this.physics.add.collider(this.manyDivers,this.manyBombs,function(e,t){var i=t.body.velocity.x;e.body.setVelocityX(i),i>0?e.play("diverLeftToRight"):e.play("diverRightToLeft")}),this.physics.add.collider(this.manyDivers,this.submarine,function(e,t){var i=10;255!=t.tintTopLeft&&(A.emit("updateArray",t),i+=10),t.destroy(),D.emit("scoreAndLives",i),P.emit("sound",2),B.emit("rescued")}),this.physics.add.collider(this.manySharks,this.manyBombs,function(e,t){16711680!=t.tintTopLeft&&(A.emit("updateArray",e),t.destroy(),e.destroy(),D.emit("scoreAndLives",5),P.emit("sound",1))}),this.physics.add.collider(this.manyEnemies,this.manyBombs,function(e,t){16711680!=t.tintTopLeft&&8388672!=e.tintTopLeft&&(A.emit("updateArray",e),t.destroy(),e.destroy(),D.emit("scoreAndLives",10),P.emit("sound",0))})}},{key:"timedEvents",value:function(){I=2*x,this.time.removeAllEvents(),this.time.addEvent({delay:Phaser.Math.Between(2e3,3e3-I),callback:this.sharkEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:Phaser.Math.Between(4e3,5e3-I),callback:this.enemySubEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:Phaser.Math.Between(2e3,4e3-I),callback:this.enemySubFire,callbackScope:this,loop:!1}),this.time.addEvent({delay:6e3+I,callback:this.diverEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e3,callback:this.oxigenTimer,callbackScope:this,loop:!0}),x>2&&this.time.addEvent({delay:Phaser.Math.Between(1e4,15e3-I),callback:this.patrolSubmarineEvent,callbackScope:this,loop:!0})}},{key:"scoreAndLives",value:function(t){(O+=t)>M&&(M+=1e3,w<4?w++:O+=100),N.setText("Score:"+O);for(var i=750,s=w;s>0;s--){i-=this.add.sprite(i,10,e.CST.SPRITE.SUBMARINE,0).setScale(.5).displayWidth}}},{key:"arrayFunction",value:function(e){L.sort(function(e,t){return e-t}),0==L[0]&&(L[0]=100*Math.round(e.body.center.y/100)+20)}},{key:"soundFx",value:function(t){switch(t){case 0:this.sound.play(e.CST.AUDIO.ENEMY_SOUND);break;case 1:this.sound.play(e.CST.AUDIO.SHARK_SOUND);break;case 2:this.sound.play(e.CST.AUDIO.DIVER_SOUND);break;case 3:this.sound.play(e.CST.AUDIO.OXIGEN)}}},{key:"rescueEvent",value:function(){if(!f&&this.diversSaved.getLength()<6)E=1,T++,g+=50,this.diversSaved.add(this.add.sprite(g,580,e.CST.SPRITE.DIVER,0).setScale(.15)),6==T&&(this.sound.play(e.CST.AUDIO.RESCUE_COMPLETED),E=6);else if(f&&E>0){6==T&&(x++,D.emit("scoreAndLives",50),this.timedEvents()),g-=50,E--,T--;var t=this.diversSaved.getChildren();this.diversSaved.remove(t[T],!0,!0)}}},{key:"oxigenTimer",value:function(){f&&S&&(B.emit("rescued"),b<100&&(b+=15),b>30&&(v.clear(),v.defaultFillColor=255),b>100&&(b=100),0==E&&100==b?(S=!1,this.sound.stopByKey(e.CST.AUDIO.OXIGEN),this.sound.removeByKey(e.CST.AUDIO.OXIGEN_LOW),this.sound.resumeAll()):P.emit("sound",3)),f||(v.clear(),(b-=2)<1&&this.endGame(),30==b&&(v.defaultFillColor=16711680,this.sound.play(e.CST.AUDIO.OXIGEN_LOW,{loop:!0,volume:.3}))),v.fillRect(380,540,b,18).setDepth(1)}},{key:"updateBodies",value:function(){for(var e=0;e<this.manySharks.getLength();e++)(R[e].body.x<-1.2*R[e].body.width||R[e].body.x>this.game.renderer.width)&&(A.emit("updateArray",R[e]),R[e].destroy());for(var t=0;t<this.manyEnemies.getLength();t++)(k[t].body.x<-1.2*k[t].body.width||k[t].body.x>this.game.renderer.width)&&(8388672!=k[t].tintTopLeft&&A.emit("updateArray",k[t]),k[t].destroy());for(var i=0;i<this.manyDivers.getLength();i++)(C[i].body.x<-C[i].body.width||C[i].body.x>this.game.renderer.width)&&(255!=C[i].tintTopLeft&&A.emit("updateArray",C[i]),C[i].destroy())}},{key:"sharkEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++)if(0!=L[t]){this.manySharks.add(this.physics.add.sprite(-20,L[t],e.CST.SPRITE.SHARK,0).setScale(.15)),R=this.manySharks.getChildren();var i=this.manySharks.getLength()-1;Phaser.Math.Between(0,10)%2==0?(R[i].body.setVelocityX(120+I),this.anims.play("sharkLeftToRight",R[i])):(R[i].body.reset(this.game.renderer.width,L[t]),R[i].body.setVelocityX(-120+I),this.anims.play("sharkRightToLeft",R[i])),L[t]=0,x>2&&(R[i].tint=16711680,0==Phaser.Math.Between(0,2)&&this.kamikazeDiver())}}},{key:"enemySubEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++){if(0!=L[t]){this.manyEnemies.add(this.physics.add.sprite(-20,L[t],e.CST.SPRITE.SUBMARINE,0).setScale(.8).setSize(90,25).setOffset(0,6)),k=this.manyEnemies.getChildren();var i=this.manyEnemies.getLength()-1;Phaser.Math.Between(0,10)%2==0?(k[i].body.setVelocityX(100+I),this.anims.play("enemiLeftToRight",k[i])):(k[i].body.reset(this.game.renderer.width,L[t]),k[i].body.setVelocityX(-100+I),this.anims.play("enemiRightToLeft",k[i]))}L[t]=0}}},{key:"enemySubFire",value:function(){this.time.addEvent({delay:Phaser.Math.Between(1e3,6e3-I),callback:this.enemySubFire,callbackScope:this,loop:!1});for(var t=0;t<this.manyEnemies.getLength();t++){k=this.manyEnemies.getChildren();var i=this.manyBombs.getChildren(),s=this.manyBombs.getLength();k[t].body.velocity.x==-100+I&&8388672!=k[t].tintTopLeft?(this.manyBombs.add(this.physics.add.sprite(k[t].body.left-k[t].body.halfWidth/2,k[t].body.center.y,e.CST.SPRITE.BOMB,0).setScale(.1)),i[s].body.setVelocityX(-200+I),i[s].tint=16711680,this.anims.play("bombLeft",i[s])):k[t].body.velocity.x==100+I&&(this.manyBombs.add(this.physics.add.sprite(k[t].body.right+k[t].body.halfWidth/2,k[t].body.center.y,e.CST.SPRITE.BOMB,0).setScale(.1)),i[s].body.setVelocityX(200+I),i[s].tint=16711680,this.anims.play("bombRight",i[s]))}}},{key:"patrolSubmarineEvent",value:function(){if(1!=f){this.manyEnemies.add(this.physics.add.sprite(this.game.renderer.width,80,e.CST.SPRITE.SUBMARINE,0).setScale(.8).setSize(90,25).setOffset(0,6)),k=this.manyEnemies.getChildren();var t=this.manyEnemies.getLength()-1;k[t].body.setVelocityX(-100+I),k[t].tint=8388672,this.anims.play("enemiRightToLeft",k[t])}}},{key:"diverEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++)if(0!=L[t]){this.manyDivers.add(this.physics.add.sprite(0,L[t],e.CST.SPRITE.DIVER,0).setScale(.15)),C=this.manyDivers.getChildren();var i=this.manyDivers.getLength()-1;if(Phaser.Math.Between(0,10)%2==0?(C[i].body.setVelocityX(100+2*x),this.anims.play("diverLeftToRight",C[i])):(C[i].body.reset(this.game.renderer.width,L[t]),C[i].body.setVelocityX(2*x-100),this.anims.play("diverRightToLeft",C[i])),L[t]=0,i>3)return}}},{key:"kamikazeDiver",value:function(){for(var t=0;t<this.manySharks.getLength();t++){R=this.manySharks.getChildren();var i=this.manyDivers.getChildren(),s=this.manyDivers.getLength();R[t].body.velocity.x==-120+I&&R[t].body.right>this.game.renderer.width&&s<1&&(this.manyDivers.add(this.physics.add.sprite(R[t].body.left-R[t].body.halfWidth/1.2,R[t].body.center.y,e.CST.SPRITE.DIVER,0).setScale(.15)),i[s].tint=255)}C=this.manyDivers.getChildren()}},{key:"endGame",value:function(){this.input.shutdown(),this.sound.removeByKey(e.CST.AUDIO.GAME_MUSIC),this.submarine.tint=0,w>0?(T>0&&T--,w--,F=!0):(T=0,w=3,M=1e3,F=!1),this.scene.pause(e.CST.SCENES.PLAY),this.scene.run(e.CST.SCENES.END,{finalScore:O,gameLevel:x,continue:F})}},{key:"update",value:function(t,i){if(1==this.submarine.active){if(!f&&1==this.submarine.body.onCeiling()&&this.submarine.body.y<76&&(f||0!=this.diversSaved.getLength()||this.endGame(),f=!0,S=!0,this.submarine.setVelocityY(0),this.submarine.setVelocityX(0),this.sound.pauseAll()),S)return;if(1==X&&(1==U||1==U.isDown)){X=!1,this.sound.play(e.CST.AUDIO.PLAYER_FIRE_SOUND);var s=this.manyBombs.getChildren(),a=this.manyBombs.getLength();1==U&&(U=!1),1==u?(this.manyBombs.add(this.physics.add.sprite(this.submarine.body.right+this.submarine.body.halfWidth/2,this.submarine.body.center.y,e.CST.SPRITE.BOMB,0).setScale(.08)),s[a].body.setVelocityX(180),this.anims.play("bombRight",s[a])):(this.manyBombs.add(this.physics.add.sprite(this.submarine.body.left-this.submarine.body.halfWidth/2,this.submarine.body.center.y,e.CST.SPRITE.BOMB,0).setScale(.08)),s[a].body.setVelocityX(-180),this.anims.play("bombLeft",s[a])),this.time.delayedCall(500,function(){0==X&&(X=!0)})}1==this.controls.right.isDown&&(this.submarine.setVelocityX(p),this.submarine.play("left",!0),u=1),1==this.controls.left.isDown&&(this.submarine.setVelocityX(-p),this.submarine.play("right",!0),u=-1),this.controls.left.isUp&&this.controls.right.isUp&&this.submarine.setVelocityX(0),1==this.controls.up.isDown&&this.submarine.setVelocityY(-p),this.controls.up.isUp&&this.controls.down.isUp&&this.submarine.setVelocityY(0),1==this.controls.down.isDown&&(this.submarine.setVelocityY(p),f=!1)}else this.endGame();1==this.controls.esc.isDown&&(this.scene.stop(e.CST.SCENES.PLAY),this.scene.run(e.CST.SCENES.MENU))}}]),n}();exports.PlayScene=_;
},{"../CST":"pukg"}],"ldhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EndScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var r=c(e,"string");return"symbol"===t(r)?r:String(r)}function c(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=p();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=0,d=0,b=!0,h=!1,v=function(t){u(i,Phaser.Scene);var n=a(i);function i(){return r(this,i),n.call(this,{key:e.CST.SCENES.END})}return o(i,[{key:"init",value:function(e){S=e.finalScore,d=e.gameLevel,h=e.continue}},{key:"preload",value:function(){this.sound.stopAll(),this.sound.play(e.CST.AUDIO.END_SOUND)}},{key:"create",value:function(){var t=this;if(1==h)this.time.delayedCall(2e3,function(){t.scene.start(e.CST.SCENES.PLAY,{gameLevel:d,sceneRestart:b,resetScore:S})});else{this.add.image(0,0,e.CST.IMAGE.END_BG).setOrigin(0).setDepth(0);var r=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2.4,e.CST.IMAGE.PLAY).setDepth(1);this.add.text(285,100,"Final Score:",{fontSize:"32px",fill:"#FFF"}).setText("Final Score:"+S),S=0,r.setInteractive(),r.on("pointerup",function(){S=0,t.scene.sleep(e.CST.SCENES.END),t.scene.start(e.CST.SCENES.PLAY,{gameLevel:d,sceneRestart:b,resetScore:S})})}this.controls=this.input.keyboard.addKeys("enter")}},{key:"update",value:function(t,r){1==this.controls.enter.isDown&&(this.scene.sleep(e.CST.SCENES.END),this.scene.start(e.CST.SCENES.PLAY,{gameLevel:d,sceneRestart:b,resetScore:S}))}}]),i}();exports.EndScene=v;
},{"../CST":"pukg"}],"HJDO":[function(require,module,exports) {
"use strict";var e=require("./scenes/LoadScene"),c=require("./scenes/MenuScene"),n=require("./scenes/PlayScene"),a=require("./scenes/EndScene"),r=new Phaser.Game({scene:[e.LoadScene,c.MenuScene,n.PlayScene,a.EndScene],render:{pixelArt:!0},scale:{autoCenter:Phaser.Scale.CENTER_BOTH,mode:Phaser.Scale.FIT,width:800,height:600},physics:{default:"arcade",arcade:{debug:!1,debugShowBody:!1,debugShowStaticBody:!1}}});
},{"./scenes/LoadScene":"Ycqt","./scenes/MenuScene":"qGid","./scenes/PlayScene":"M75y","./scenes/EndScene":"ldhK"}]},{},["HJDO"], null)
//# sourceMappingURL=/main.fd83908f.js.map