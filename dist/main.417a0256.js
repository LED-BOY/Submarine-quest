parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"pukg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CST=void 0;var e={SCENES:{LOAD:"LOAD",MENU:"MENU",PLAY:"PLAY",END:"END"},IMAGE:{LOGO:"logo.png",OPTIONS:"options_button.png",PLAY:"play_button.png",TITLE:"title_bg.png",GAME_BG:"game_bg.png",END_BG:"end_bg.png",FIRE_BUTTON:"fire_button.png",HOW_TO_PLAY:"how_button.png",HOW_TO_PLAY_IMAGE:"howtoplay_image.png",BACK:"back_button.png"},AUDIO:{TITLE:"menu_theme.mp3",GAME_MUSIC:"main_theme.mp3",DIVER_SOUND:"diver_rescued.ogg",ENEMY_SOUND:"enemy_sub_destroyed.ogg",SHARK_SOUND:"shark_killed.ogg",PLAYER_FIRE_SOUND:"fire_sound.ogg",END_SOUND:"gameover.ogg",NEW_SOUND:"new_game.ogg",OXIGEN:"oxigen_refill.ogg",OXIGEN_LOW:"oxigen_low.ogg",RESCUE_COMPLETED:"rescue_completed.ogg",RESCUE_SEQUENCE:"rescue_sequence.ogg"},SPRITE:{SUBMARINE:"submarine.png",SHARK:"shark.png",DIVER:"diver.png",BOMB:"bomb.png"}};exports.CST=e;
},{}],"Ycqt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadScene=void 0;var t=require("../CST");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var r=a(t,"string");return"symbol"===e(r)?r:String(r)}function a(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,r||"default");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=p();return function(){var r,o=h(t);if(e){var n=h(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return f(this,r)}}function f(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){u(i,Phaser.Scene);var o=s(i);function i(){return r(this,i),o.call(this,{key:t.CST.SCENES.LOAD})}return n(i,[{key:"init",value:function(){}},{key:"loadImages",value:function(){for(var e in this.load.setPath("./assets/image"),t.CST.IMAGE)this.load.image(t.CST.IMAGE[e],t.CST.IMAGE[e])}},{key:"loadAudio",value:function(){for(var e in this.load.setPath("./assets/audio"),t.CST.AUDIO)this.load.audio(t.CST.AUDIO[e],t.CST.AUDIO[e])}},{key:"loadSprites",value:function(){this.load.setPath("./assets/sprite"),this.load.spritesheet(t.CST.SPRITE.SUBMARINE,t.CST.SPRITE.SUBMARINE,{frameWidth:90,frameHeight:33}),this.load.spritesheet(t.CST.SPRITE.SHARK,t.CST.SPRITE.SHARK,{frameWidth:440,frameHeight:232}),this.load.spritesheet(t.CST.SPRITE.DIVER,t.CST.SPRITE.DIVER,{frameWidth:316,frameHeight:213}),this.load.spritesheet(t.CST.SPRITE.BOMB,t.CST.SPRITE.BOMB,{frameWidth:279,frameHeight:210})}},{key:"preload",value:function(){var t=this;this.loadSprites(),this.loadAudio(),this.loadImages();var e=this.add.graphics({fillStyle:{color:16777215}});this.load.on("progress",function(r){e.fillRect(0,t.game.renderer.height/2,t.renderer.width*r,50),console.log(r)}),this.load.on("complete",function(){}),this.load.on("load",function(t){console.log(t.src)})}},{key:"create",value:function(){this.scene.stop(t.CST.SCENES.LOAD),this.scene.start(t.CST.SCENES.MENU)}}]),i}();exports.LoadScene=d;
},{"../CST":"pukg"}],"qGid":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MenuScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){var n=s(e,"string");return"symbol"===t(n)?n:String(n)}function s(e,n){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,n||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=p();return function(){var n,i=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(t){u(o,Phaser.Scene);var i=c(o);function o(){return n(this,o),i.call(this,{key:e.CST.SCENES.MENU})}return r(o,[{key:"init",value:function(){}},{key:"preload",value:function(){this.sound.stopAll()}},{key:"playTheGame",value:function(){this.input.shutdown(),this.scene.stop(e.CST.SCENES.MENU),this.scene.run(e.CST.SCENES.PLAY)}},{key:"create",value:function(){var t=this;console.log("title loading"),this.add.image(this.game.renderer.width/2,.2*this.game.renderer.height,e.CST.IMAGE.LOGO).setDepth(1).setScale(.25),this.add.image(0,0,e.CST.IMAGE.TITLE).setOrigin(0).setDepth(0);var n=this.add.image(0,0,e.CST.IMAGE.HOW_TO_PLAY_IMAGE).setOrigin(0).setDepth(1).setVisible(!1),i=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,e.CST.IMAGE.PLAY).setDepth(1).setScale(.1),r=this.add.image(i.x,i.y+1.5*i.displayHeight,e.CST.IMAGE.HOW_TO_PLAY).setDepth(1).setScale(.25),o=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,e.CST.IMAGE.BACK).setDepth(1).setScale(.1).setVisible(!1),s=this.add.sprite(i.x-i.displayWidth,i.y-5,e.CST.SPRITE.SUBMARINE).setScale(1).setDepth(0);this.sound.pauseOnBlur=!1,this.sound.play(e.CST.AUDIO.TITLE,{loop:!0,volume:.8,repeat:-1}),this.controls=this.input.keyboard.addKeys("up, down, left, right, space, enter"),this.anims.create({key:"animSubmarine",frameRate:3,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{frames:[0,1,2]})}),s.play("animSubmarine"),i.setInteractive(),r.setInteractive(),o.setInteractive(),i.on("pointerover",function(){s.setVisible(!0),s.setPosition(i.x-i.displayWidth,i.y-i.displayHeight/6)}),i.on("pointerout",function(){s.setVisible(!1)}),i.on("pointerup",function(){t.playTheGame()}),r.on("pointerover",function(){s.setVisible(!0),s.setPosition(r.x-r.displayWidth/1.5,r.y-r.displayHeight/6)}),r.on("pointerout",function(){console.log("out of here"),s.setVisible(!1)}),r.on("pointerup",function(){i.setVisible(!1),r.setVisible(!1),n.setVisible(!0),o.setVisible(!0)}),o.on("pointerup",function(){o.setVisible(!1),n.setVisible(!1),i.setVisible(!0),r.setVisible(!0)})}},{key:"update",value:function(e,t){1==this.controls.enter.isDown&&this.playTheGame()}}]),o}();exports.MenuScene=y;
},{"../CST":"pukg"}],"M75y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlayScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,r(s.key),s)}}function a(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){var i=n(e,"string");return"symbol"===t(i)?i:String(i)}function n(e,i){if("object"!==t(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,i||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=c();return function(){var i,s=m(e);if(t){var a=m(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return l(this,i)}}function l(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,f,p,b,v,S,E,g=0,T=0,k=0,R=0,C=0,L=[130,230,330,430,530],I=0,P=140,B=120,D=100,A=new Phaser.Events.EventEmitter,O=new Phaser.Events.EventEmitter,w=new Phaser.Events.EventEmitter,V=new Phaser.Events.EventEmitter,N=3,M=0,x=0,U=1e3,X=1,W=!0,F=!1,_=!0,j=!1,G=!1,Y=0,K=function(t){o(r,Phaser.Scene);var s=d(r);function r(){return i(this,r),s.call(this,{key:e.CST.SCENES.PLAY})}return a(r,[{key:"initVariables",value:function(){u=1,f=!0,p=140,b=100,v=0,S=!1,E=200,L=[120,220,320,420,520],_=!0}},{key:"init",value:function(e){this.initVariables(),1==e.sceneRestart&&((X=e.gameLevel)>30&&(X=30),M=e.resetScore)}},{key:"preload",value:function(){this.sound.stopAll(),W&&this.load.plugin("rexvirtualjoystickplugin","assets/plugins/virtualJoystick.js",!0)}},{key:"create",value:function(){var t=this;this.background=this.physics.add.image(0,0,e.CST.IMAGE.GAME_BG).setOrigin(0).setDepth(0),this.add.graphics({fillStyle:{color:2604996,alpha:.8}}).fillRect(0,86,800,12).setDepth(2),1==this.sys.game.device.input.touch?(this.joyStick=this.plugins.get("rexvirtualjoystickplugin").add(this,{x:120,y:470,radius:100,base:this.add.circle(0,0,45,12697271),thumb:this.add.circle(0,0,25,13421772),dir:"4dir",forceMin:16,fixed:!0,enable:!0}),this.controls=this.joyStick.createCursorKeys(),this.fireButton=this.add.image(700,520,e.CST.IMAGE.FIRE_BUTTON).setScale(.3).setDepth(0),this.input.addPointer(1),this.fireButton.setInteractive(),this.fireButton.on("pointerover",function(){F=!0})):(this.controls=this.input.keyboard.addKeys("up, down, left, right"),F=this.input.keyboard.addKey("space"),G=this.input.keyboard.addKey("esc"));var i=this.add.text(780,0,"X",{fontSize:"24px",fill:"#0000FF",fontFamily:"Arial"});i.setInteractive(),i.on("pointerup",function(){M=0,t.scene.stop(e.CST.SCENES.PLAY),t.scene.run(e.CST.SCENES.MENU)}),W&&(W=!1,this.anims.create({key:"left",frameRate:10,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{start:0,end:2})}),this.anims.create({key:"right",frameRate:10,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SUBMARINE,{start:3,end:5})}),this.anims.create({key:"sharkLeftToRight",frameRate:5,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SHARK,{frames:[0,1,2,1,0]})}),this.anims.create({key:"sharkRightToLeft",frameRate:5,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.SHARK,{frames:[3,4,5,4,3]})}),this.anims.create({key:"diverLeftToRight",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.DIVER,{frames:[0,1,2,1,0,2]})}),this.anims.create({key:"diverRightToLeft",frameRate:6,repeat:-1,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.DIVER,{frames:[3,4,5,4,3,5]})}),this.anims.create({key:"bombRight",frameRate:0,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.BOMB,{frames:[0]})}),this.anims.create({key:"bombLeft",frameRate:0,frames:this.anims.generateFrameNumbers(e.CST.SPRITE.BOMB,{frames:[1]})}),O.on("sound",this.soundFx,this),A.on("rescued",this.rescueEvent,this),w.on("updateArray",this.arrayFunction,this),V.on("scoreAndLives",this.scoreAndLives,this)),(v=this.add.graphics({fillStyle:{color:255}})).fillRect(380,545,b,18).setDepth(1),x=this.add.text(16,16,"Score:",{fontSize:"24px",fill:"#000"}),V.emit("scoreAndLives",0),this.add.text(280,542,"OXIGEN:",{fontSize:"24px",fill:"#000"}),this.sound.play(e.CST.AUDIO.GAME_MUSIC,{loop:!0,volume:.2}),this.submarine=this.physics.add.sprite(400,75,e.CST.SPRITE.SUBMARINE,0).setScale(1),this.submarine.setSize(80,20).setOffset(6,10),this.submarine.body.customBoundsRectangle=new Phaser.Geom.Rectangle(0,75,800,460),this.submarine.body.setCollideWorldBounds(!0),this.manyEnemies=this.physics.add.group(),this.manyEnemies.defaults.setImmovable=!0,this.manySharks=this.physics.add.group(),this.manySharks.defaults.setImmovable=!0,this.manyDivers=this.physics.add.group(),this.diversSaved=this.add.group();for(var s=0;s<T;s++)E+=50,this.diversSaved.add(this.add.sprite(E,580,e.CST.SPRITE.DIVER,0).setScale(.15));this.manyBombs=this.physics.add.group(),this.manyBombs.defaults.setImmovable=!0,this.timedEvents(),this.physics.add.collider(this.background,this.manyBombs,function(e,t){1==t.body.checkWorldBounds()&&t.destroy()}),this.physics.add.collider(this.submarine,this.manySharks,function(e,t){e.active=!1}),this.physics.add.collider(this.submarine,this.manyEnemies,function(e,t){e.active=!1}),this.physics.add.collider(this.submarine,this.manyBombs,function(e,t){16711680==t.tintTopLeft&&(e.active=!1)}),this.physics.add.collider(this.manyDivers,this.manySharks,function(e,t){var i=t.body.velocity.x;255==e.tintTopLeft&&(e.body.setVelocityX(i),i>0?e.play("diverLeftToRight"):e.play("diverRightToLeft"))}),this.physics.add.collider(this.manyDivers,this.manyEnemies,function(e,t){255==e.tintTopLeft&&0==e.body.checkWorldBounds()&&(e.destroy(),O.emit("sound",2),M>=20&&V.emit("scoreAndLives",-20))}),this.physics.world.addCollider(this.manyDivers,this.manyDivers,function(e,t){e.body.velocity.x>0?(e.body.setVelocityX(D),e.play("diverLeftToRight")):(e.body.setVelocityX(-D),e.play("diverRightToLeft")),t.body.velocity.x>0?(t.body.setVelocityX(D),t.play("diverLeftToRight")):(t.body.setVelocityX(-D),t.play("diverRightToLeft")),255!=e.tintTopLeft&&255!=t.tintTopLeft&&e.destroy()}),this.physics.add.overlap(this.manyDivers,this.manyBombs,function(e,t){var i=t.body.velocity.x;e.body.setVelocityX(i),i>0?e.play("diverLeftToRight"):e.play("diverRightToLeft")}),Y=this.physics.add.collider(this.manyDivers,this.submarine,function(e,t){var i=10;255!=t.tintTopLeft&&(w.emit("updateArray",t),i+=10),t.destroy(),V.emit("scoreAndLives",i),O.emit("sound",2),A.emit("rescued"),6==T&&(Y.active=!1)}),this.physics.add.overlap(this.manySharks,this.manyBombs,function(e,t){16711680!=t.tintTopLeft&&(w.emit("updateArray",e),t.destroy(),e.destroy(),V.emit("scoreAndLives",5),O.emit("sound",1))}),this.physics.add.collider(this.manyEnemies,this.manyBombs,function(e,t){16711680!=t.tintTopLeft&&255!=e.tintTopLeft&&(w.emit("updateArray",e),t.destroy(),e.destroy(),V.emit("scoreAndLives",10),O.emit("sound",0))})}},{key:"timedEvents",value:function(){I=2*X,this.time.removeAllEvents(),this.time.addEvent({delay:Phaser.Math.Between(2e3,3e3-I),callback:this.sharkEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:Phaser.Math.Between(4e3,5e3-I),callback:this.enemySubEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:Phaser.Math.Between(2e3,4e3-I),callback:this.enemySubFire,callbackScope:this,loop:!1}),this.time.addEvent({delay:6e3+I,callback:this.diverEvent,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e3,callback:this.sharkWavePattern,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e3,callback:this.oxigenTimer,callbackScope:this,loop:!0}),X>2&&this.time.addEvent({delay:Phaser.Math.Between(1e4,15e3-I),callback:this.patrolSubmarineEvent,callbackScope:this,loop:!0})}},{key:"scoreAndLives",value:function(t){(M+=t)>U&&(U+=1e3,N<4?N++:M+=100),x.setText("Score:"+M);for(var i=740,s=N;s>0;s--){i-=1.1*this.add.sprite(i,12,e.CST.SPRITE.SUBMARINE,0).setScale(.4).displayWidth}}},{key:"arrayFunction",value:function(e){L.sort(function(e,t){return e-t}),0==L[0]&&(L[0]=100*Math.round(e.body.center.y/100)+20)}},{key:"soundFx",value:function(t){switch(t){case 0:this.sound.play(e.CST.AUDIO.ENEMY_SOUND);break;case 1:this.sound.play(e.CST.AUDIO.SHARK_SOUND);break;case 2:this.sound.play(e.CST.AUDIO.DIVER_SOUND);break;case 3:this.sound.play(e.CST.AUDIO.OXIGEN)}}},{key:"rescueEvent",value:function(){if(!f&&this.diversSaved.getLength()<6)g=1,T++,E+=50,this.diversSaved.add(this.add.sprite(E,580,e.CST.SPRITE.DIVER,0).setScale(.15)),6==T&&(this.sound.play(e.CST.AUDIO.RESCUE_COMPLETED),g=6);else if(f&&g>0){6==T&&(X<30&&X++,V.emit("scoreAndLives",50),this.timedEvents()),E-=50,g--,T--;var t=this.diversSaved.getChildren();this.diversSaved.remove(t[T],!0,!0)}}},{key:"oxigenTimer",value:function(){f&&S&&(A.emit("rescued"),b<100&&(b+=15),b>30&&(v.clear(),v.defaultFillColor=255),b>100&&(b=100),0==g&&100==b?(Y.active=!0,S=!1,this.sound.stopByKey(e.CST.AUDIO.OXIGEN),this.sound.removeByKey(e.CST.AUDIO.OXIGEN_LOW),this.sound.resumeAll()):O.emit("sound",3)),f||(v.clear(),(b-=2)<1&&this.endGame(),30==b&&(v.defaultFillColor=16711680,this.sound.play(e.CST.AUDIO.OXIGEN_LOW,{loop:!0,volume:.3}))),v.fillRect(380,545,b,18).setDepth(1)}},{key:"updateBodies",value:function(){for(var e=0;e<this.manySharks.getLength();e++)(k[e].body.right<-k[e].displayWidth||k[e].body.left>this.game.renderer.width+k[e].displayWidth)&&(w.emit("updateArray",k[e]),k[e].destroy());for(var t=0;t<this.manyEnemies.getLength();t++)(R[t].body.right<-R[t].displayWidth||R[t].body.left>this.game.renderer.width+R[t].displayWidth)&&(16711698!=R[t].tintTopLeft&&w.emit("updateArray",R[t]),R[t].destroy());for(var i=0;i<this.manyDivers.getLength();i++)(C[i].body.right<-C[i].displayWidth||C[i].body.left>this.game.renderer.width+C[i].displayWidth)&&(255!=C[i].tintTopLeft&&w.emit("updateArray",C[i]),C[i].destroy())}},{key:"sharkEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++)if(0!=L[t]){var i=this.manySharks.getLength();this.manySharks.add(this.physics.add.sprite(0,0,e.CST.SPRITE.SHARK,0).setScale(.15).setVisible(!1)),k=this.manySharks.getChildren(),Phaser.Math.Between(0,10)%2==0?(k[i].body.reset(-k[i].body.halfWidth,L[t]),k[i].body.setVelocityX(P+I),this.anims.play("sharkLeftToRight",k[i])):(k[i].body.reset(this.game.renderer.width+k[i].body.halfWidth,L[t]),k[i].body.setVelocityX(-P-I),this.anims.play("sharkRightToLeft",k[i])),k[i].setVisible(!0),X>2&&(k[i].tint=16711680,0==Phaser.Math.Between(0,2)&&this.kamikazeDiver(k[i])),L[t]=0}}},{key:"sharkWavePattern",value:function(){for(var e=0;e<this.manySharks.getLength();e++)k[e].body.velocity.y>0?k[e].body.setVelocityY(-10):k[e].body.setVelocityY(10)}},{key:"enemySubEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++)if(0!=L[t]){var i=this.manyEnemies.getLength();this.manyEnemies.add(this.physics.add.sprite(0,0,e.CST.SPRITE.SUBMARINE,0).setScale(.8).setSize(90,25).setOffset(0,6).setVisible(!1)),(R=this.manyEnemies.getChildren())[i].tint=16711680,0==Phaser.Math.Between(0,1)?(R[i].body.reset(-R[i].body.halfWidth,L[t]),R[i].body.setVelocityX(B+I),this.anims.play("left",R[i])):(R[i].body.reset(this.game.renderer.width+R[i].body.halfWidth,L[t]),R[i].body.setVelocityX(-B-I),this.anims.play("right",R[i])),R[i].setVisible(!0),L[t]=0}}},{key:"enemySubFire",value:function(){this.time.addEvent({delay:Phaser.Math.Between(1e3,6e3-I),callback:this.enemySubFire,callbackScope:this,loop:!1}),R=this.manyEnemies.getChildren();for(var t=0;t<this.manyEnemies.getLength();t++){var i=this.manyBombs.getLength();this.manyBombs.add(this.physics.add.sprite(0,0,e.CST.SPRITE.BOMB,0).setScale(.1).setVisible(!1));var s=this.manyBombs.getChildren();s[i].tint=16711680,R[t].body.velocity.x==-B-I&&16711698!=R[t].tintTopLeft?(s[i].body.reset(R[t].x-R[t].body.halfWidth,R[t].y),s[i].body.setVelocityX(-200-I),this.anims.play("bombLeft",s[i])):R[t].body.velocity.x==B+I&&(s[i].body.reset(R[t].x+R[t].body.halfWidth,R[t].y),s[i].body.setVelocityX(200+I),this.anims.play("bombRight",s[i])),s[i].setVisible(!0)}}},{key:"patrolSubmarineEvent",value:function(){if(1!=f){this.manyEnemies.add(this.physics.add.sprite(this.game.renderer.width,80,e.CST.SPRITE.SUBMARINE,0).setScale(.8).setSize(90,25).setOffset(0,6)),R=this.manyEnemies.getChildren();var t=this.manyEnemies.getLength()-1;R[t].body.setVelocityX(-B),R[t].tint=16711698,this.anims.play("right",R[t])}}},{key:"diverEvent",value:function(){this.updateBodies();for(var t=0;t<L.length;t++)if(0!=L[t]){var i=this.manyDivers.getLength();if(this.manyDivers.add(this.physics.add.sprite(0,0,e.CST.SPRITE.DIVER,0).setScale(.15).setVisible(!1)),C=this.manyDivers.getChildren(),Phaser.Math.Between(0,10)%2==0?(C[i].body.reset(-C[i].body.halfWidth,L[t]),C[i].body.setVelocityX(D+I),this.anims.play("diverLeftToRight",C[i])):(C[i].body.reset(this.game.renderer.width+C[i].body.halfWidth,L[t]),C[i].body.setVelocityX(-D-I),this.anims.play("diverRightToLeft",C[i])),L[t]=0,C[i].setVisible(!0),i>3)return}}},{key:"kamikazeDiver",value:function(t){var i=t.body.right,s=t.body.left,a=t.body.halfWidth,r=t.body.center.y;t.body.velocity.x==-P-I&&i>this.game.renderer.width?this.manyDivers.add(this.physics.add.sprite(s-a,r,e.CST.SPRITE.DIVER,0).setScale(.15)):t.body.velocity.x==P+I&&s<0&&this.manyDivers.add(this.physics.add.sprite(i+a,r,e.CST.SPRITE.DIVER,0).setScale(.15));var n=this.manyDivers.getLength()-1;n>=0&&((C=this.manyDivers.getChildren())[n].tint=255)}},{key:"endGame",value:function(){this.input.shutdown(),this.sound.removeByKey(e.CST.AUDIO.GAME_MUSIC),this.submarine.tint=0,N>0?(T>0&&T--,N--,j=!0):(N=3,U=1e3,T=0,j=!1),this.scene.pause(e.CST.SCENES.PLAY),this.scene.run(e.CST.SCENES.END,{finalScore:M,gameLevel:X,continue:j})}},{key:"update",value:function(t,i){if(1==this.submarine.active){if(!f&&1==this.submarine.body.onCeiling()&&this.submarine.body.y<76&&(f||0!=this.diversSaved.getLength()||this.endGame(),f=!0,S=!0,this.submarine.setVelocityY(0),this.submarine.setVelocityX(0),this.sound.pauseAll()),S)return;if(1==_&&(1==F||1==F.isDown)){_=!1,this.sound.play(e.CST.AUDIO.PLAYER_FIRE_SOUND);var s=this.manyBombs.getChildren(),a=this.manyBombs.getLength();1==F&&(F=!1),1==u?(this.manyBombs.add(this.physics.add.sprite(this.submarine.body.center.x+this.submarine.body.halfWidth,this.submarine.body.center.y,e.CST.SPRITE.BOMB,0).setScale(.08)),s[a].body.setVelocityX(220),this.anims.play("bombRight",s[a])):(this.manyBombs.add(this.physics.add.sprite(this.submarine.body.center.x-this.submarine.body.halfWidth,this.submarine.body.center.y,e.CST.SPRITE.BOMB,0).setScale(.08)),s[a].body.setVelocityX(-220),this.anims.play("bombLeft",s[a])),this.time.delayedCall(500,function(){0==_&&(_=!0)})}1==this.controls.right.isDown&&(this.submarine.setVelocityX(p),this.submarine.play("left",!0),u=1),1==this.controls.left.isDown&&(this.submarine.setVelocityX(-p),this.submarine.play("right",!0),u=-1),this.controls.left.isUp&&this.controls.right.isUp&&this.submarine.setVelocityX(0),1==this.controls.up.isDown&&this.submarine.setVelocityY(-p),this.controls.up.isUp&&this.controls.down.isUp&&this.submarine.setVelocityY(0),1==this.controls.down.isDown&&0==this.submarine.body.onFloor()&&(this.submarine.setVelocityY(p),f=!1)}else this.endGame();1==G.isDown&&(M=0,this.scene.stop(e.CST.SCENES.PLAY),this.scene.run(e.CST.SCENES.MENU))}}]),r}();exports.PlayScene=K;
},{"../CST":"pukg"}],"ldhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EndScene=void 0;var e=require("../CST");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var n=c(e,"string");return"symbol"===t(n)?n:String(n)}function c(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=p();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=0,b=0,h=!0,S=!1,v=function(t){u(i,Phaser.Scene);var r=f(i);function i(){return n(this,i),r.call(this,{key:e.CST.SCENES.END})}return o(i,[{key:"init",value:function(e){d=e.finalScore,b=e.gameLevel,S=e.continue}},{key:"preload",value:function(){this.sound.stopAll(),this.sound.play(e.CST.AUDIO.END_SOUND)}},{key:"goToPlayScene",value:function(){this.scene.sleep(e.CST.SCENES.END),this.scene.start(e.CST.SCENES.PLAY,{gameLevel:b,sceneRestart:h,resetScore:d})}},{key:"create",value:function(){var t=this;if(1==S)this.time.delayedCall(2e3,function(){t.goToPlayScene()});else{this.add.image(0,0,e.CST.IMAGE.END_BG).setOrigin(0).setDepth(0);var n=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2.3,e.CST.IMAGE.PLAY).setDepth(1).setScale(.1);this.add.text(285,100,"Final Score:",{fontSize:"32px",fill:"#FFF"}).setText("Final   Score:"+d),d=0,n.setInteractive(),n.on("pointerup",function(){d=0,t.goToPlayScene()})}this.controls=this.input.keyboard.addKeys("enter")}},{key:"update",value:function(e,t){1==this.controls.enter.isDown&&this.goToPlayScene()}}]),i}();exports.EndScene=v;
},{"../CST":"pukg"}],"HJDO":[function(require,module,exports) {
"use strict";var e=require("./scenes/LoadScene"),c=require("./scenes/MenuScene"),n=require("./scenes/PlayScene"),a=require("./scenes/EndScene"),r=new Phaser.Game({scene:[e.LoadScene,c.MenuScene,n.PlayScene,a.EndScene],render:{pixelArt:!0},scale:{autoCenter:Phaser.Scale.CENTER_BOTH,mode:Phaser.Scale.AUTO,width:800,height:600},physics:{default:"arcade",arcade:{debug:!1,debugShowBody:!1,debugShowStaticBody:!1}}});
},{"./scenes/LoadScene":"Ycqt","./scenes/MenuScene":"qGid","./scenes/PlayScene":"M75y","./scenes/EndScene":"ldhK"}]},{},["HJDO"], null)
//# sourceMappingURL=/main.417a0256.js.map